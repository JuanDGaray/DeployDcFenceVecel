{% extends "base.html" %}
{% load static %}
{% load custom_filters %}
{% block extra_head %}
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    
    <style>
        #emailBodyEditor .ql-container {
            height: 250px !important;
            overflow-y: auto;
        }
        #emailBodyEditor .ql-toolbar {
            border-bottom: 1px solid #ccc;
        }
    </style>
{% endblock %}
{% block title %}Simple Invoice{% endblock %}
{% block content %}
<div id='main-pdf' class='p-3 position-relative' data-project-id="{{ project.id }}" data-proposal-id="{{ proposal.id }}">
    <a href="{% url 'detail_project' project.id %}" class="bg-light px-4 py-1 rounded-4 border border-2 border-primary fs-5"><strong><i class="bi bi-back "></i> <span id="project-container" data-project-id="{{ project.id }}">{{project.id}} </span> - {{project.project_name}}</a>
    <!-- Botones flotantes en la esquina superior derecha -->
    <div class="position-fixed top-0 end-0 m-3 d-flex flex-row gap-2" style="z-index: 10;">
        <button id="downloadBtn" class="btn btn-light btn-sm border border-danger shadow-sm rounded-2" onclick="generatePDF()" title="Download PDF">
            <i class="bi bi-file-earmark-pdf-fill text-danger fs-4"></i>
        </button>
        <a href="{% url 'edit_budgetSimple' project_id=project.id budget_id=proposal.budget.id proposal_id=proposal.id %}" class="btn btn-light btn-sm border border-primary shadow-sm rounded-2" title="Edit Proposal">
            <i class="bi bi-pencil-square text-primary fs-4"></i>
        </a>
        <button id="emailBtn" class="btn btn-light btn-sm border border-success shadow-sm rounded-2" onclick="openEmailModal()" title="Send by Email">
            <i class="bi bi-envelope-fill text-success fs-4"></i>
        </button>
    </div>
    <section id="invoice-form" class="col-md-9 mx-auto">
        {% include 'components/proposal_print.html' with is_quick_info=False %}
    </section>    
</div>
{% include 'components/modal_send_email.html' %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
<script src="{% static 'js/components/pdf_proposal.js' %}"></script>

{% endblock %}
